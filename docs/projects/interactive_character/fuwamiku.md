# インタラクティブなふわみくアプリの実装(3D on screen)
## 触れたことと力変化の検出
入力デバイスとしてはディスプレイのような平面の画面を想定する。
タップの強さを力Fに変換して、触っている箇所は画面からカメラ方向へのレイトの交差判定により決定する。力をかけている箇所が一定以上変化した場合（レイが交差するメッシュが変わった場合）に、キャラクターが反応を感じられるようにする。
力の変化のみ感じられるので、撫でるという動作をしないと反応しない。

## どの部位に当たったかを判定
メッシュを当たり判定に使うことで、
（何も手間をかけない方法では）最も正確な当たり判定ができる。
しかし、メッシュは部位ごとにグループ化されているとは限らない。
動かすことを想定したモデルでは、ボーンの設定がされいることが多く、
そのボーンに対して、weightが紐付けられている。
なので、この情報を使ってある程度の部位は判定できる。

欠点としては、

* A. ボーンに体の全ての部位の情報があるわけではない。
* B. アニメーションを制作しやすくするためのみ必要なボーン情報があり、当たり判定のチェックを惑わす。

ので、アプリケーションに関係ない部位を削除したり、必要な部分を追加する必要がある。　

ふわみくモデルでは、大体の部位が設定されていたので、この情報を元に、
当たり判定用のオブジェクトを設定する。
Unityでは、SAColliderBuilderというツールがあり、
今回はこのツールを活用して、メッシュを当たり判定とした。
使い方は、キャラクターの最も親オブジェクト（ボーンを子に持つGameObject)にSABoneClolliderBuilderをつけて、Builderの設定をいじってProcessボタンを押すだけです。
私は次のような設定で書きました。

!!! todo
    * 欠点Aの対策
    * 欠点Bの対策

## 好感度の計算


!!! todo
    * 性格の違いをパラメータとして表現したい。　

## 


## 
